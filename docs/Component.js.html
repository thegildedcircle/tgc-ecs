<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Component.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-ECS_Component.html">ECS/Component</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ECS_Component.html#~Component">Component</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Component.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * ECS.Component
 * @module ECS/Component
 */

/**
 * @name Component
 * @function
 *
 * @param   {string}  name      - The name of the component.
 * @param   {bool}    unique    - Whether or not a component can have more than one instance of this component.
 * @param   {Object}  defaults  - The default state of every instance of this component.
 *
 * @return  {Function} Returns a constructor for the new component. The returned
 * constructor optionally takes a `init` object to initialise the component with
 * values different from the component defaults described above.
 *
 * @description A generic function used to create new components. Most typically
 * used when registering a new component to an ECS.Manager with `ECS.Manager.registerComponent(...)`.
 *
 * Note that the function returns another function before finally returning the
 * complete component object. The initial call provides the constructor for your
 * new type of component, you may then call this constructor with the initial values
 * for that specific instance of your component:
 * ```js
 * const { Component, Manager } = require('ECS')
 *
 * // Create a component to track the health of an entity
 * const HealthComponent = ECS.Component('health', true {
 *   value: 100
 * })
 * // Register that component with the ECS Manager
 * ECS.Manager.registerComponent(HealthComponent)
 *
 * // Create a new entity that has our health component
 * ECS.Manager.addEntity([ 'health' ])
 * // Create a new entity that overrides the default health value
 * ECS.Manager.addEntity([
 *   ECS.Manager.components.health({ value: 200 })
 * ])
 * ```
 */
module.exports = (name, unique, defaults) => (init = {}) => {
  const state = {};
  // Override the component defaults if some initial values are supplied when
  // constructing an instance of the component. Defaults still dictates the shape
  // of the component, properties defined in init but not defaults are ignored.
  for (const key in defaults) {
    state[key] = init.hasOwnProperty(key) ? init[key] : defaults[key];
  }

  return {
    name,
    unique,
    state,
    // Iterate through the keys in the *internal* state object. This ensures
    // new keys aren't accidentally added to the component state.
    // If the incoming state has a key that matches, update internal state
    // with the new value, if not then internal state remains unchanged. This
    // enables the possibility of supplying only the necessary parts of updated
    // state instead of the whole object.
    update(state) {
      for (const key in this.state) {
        this.state[key] = state.hasOwnProperty(key)
          ? state[key]
          : this.state[key];
      }
    }
  };
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Feb 27 2019 14:58:48 GMT+0000 (UTC) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
